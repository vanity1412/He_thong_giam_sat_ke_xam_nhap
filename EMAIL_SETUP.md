# H∆∞·ªõng D·∫´n C·∫•u H√¨nh Email C·∫£nh B√°o

## T√≠nh nƒÉng
- T·ª± ƒë·ªông g·ª≠i email khi ph√°t hi·ªán ng∆∞·ªùi l·∫° **qu√° 10 gi√¢y**
- ƒê√≠nh k√®m ·∫£nh ch·ª•p ng∆∞·ªùi l·∫°
- Cooldown 60 gi√¢y gi·ªØa c√°c email ƒë·ªÉ tr√°nh spam
- G·ª≠i t·ª´ Gmail: watershoputetea@gmail.com

## C√°ch s·ª≠ d·ª•ng

### 1. Tr√™n Web Interface
1. M·ªü tr√¨nh duy·ªát: `http://localhost:5000`
2. T√¨m ph·∫ßn **"üìß C·∫£nh B√°o Email"**
3. Nh·∫≠p email c·ªßa b·∫°n (v√≠ d·ª•: yourname@gmail.com)
4. Click **"‚úâÔ∏è B·∫≠t Email"**
5. Click **"üß™ Test"** ƒë·ªÉ ki·ªÉm tra

### 2. Ki·ªÉm tra ho·∫°t ƒë·ªông
1. ƒê·∫£m b·∫£o ƒë√£ hu·∫•n luy·ªán model AI
2. ƒê·ªÉ ng∆∞·ªùi l·∫° xu·∫•t hi·ªán tr∆∞·ªõc camera
3. Sau 10 gi√¢y, email s·∫Ω ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông
4. Ki·ªÉm tra h·ªôp th∆∞ ƒë·∫øn c·ªßa b·∫°n

## N·ªôi dung Email

Email c·∫£nh b√°o bao g·ªìm:
- **Ti√™u ƒë·ªÅ:** ‚ö†Ô∏è C·∫¢NH B√ÅO AN NINH - [Th·ªùi gian]
- **N·ªôi dung:** 
  - Th√¥ng b√°o ph√°t hi·ªán ng∆∞·ªùi l·∫°
  - Th·ªùi gian ph√°t hi·ªán
  - Tr·∫°ng th√°i c·∫£nh b√°o
- **ƒê√≠nh k√®m:** ·∫¢nh ch·ª•p t·ª´ camera (n·∫øu c√≥)

## C·∫•u h√¨nh Gmail g·ª≠i

H·ªá th·ªëng s·ª≠ d·ª•ng Gmail SMTP v·ªõi c·∫•u h√¨nh:
```
Host: smtp.gmail.com
Port: 587
Email: watershoputetea@gmail.com
Password: ibdjgggydrtteqxg (App Password)
```

## L∆∞u √Ω quan tr·ªçng

### B·∫£o m·∫≠t
- ‚ö†Ô∏è **KH√îNG chia s·∫ª App Password** v·ªõi ng∆∞·ªùi kh√°c
- Email g·ª≠i ƒëi t·ª´ watershoputetea@gmail.com
- Ch·ªâ b·∫°n nh·∫≠n ƒë∆∞·ª£c email c·∫£nh b√°o

### Gi·ªõi h·∫°n
- **Cooldown:** 60 gi√¢y gi·ªØa c√°c email
- **Ng∆∞·ª°ng:** Ph·∫£i c·∫£nh b√°o li√™n t·ª•c 10 gi√¢y
- **K√≠ch th∆∞·ªõc ·∫£nh:** ~15-30KB

### Kh·∫Øc ph·ª•c s·ª± c·ªë

**Email kh√¥ng g·ª≠i ƒë∆∞·ª£c:**
1. Ki·ªÉm tra k·∫øt n·ªëi internet
2. Click "üß™ Test" ƒë·ªÉ ki·ªÉm tra k·∫øt n·ªëi
3. Ki·ªÉm tra email nh·∫≠n c√≥ ƒë√∫ng kh√¥ng
4. Xem console log ƒë·ªÉ bi·∫øt l·ªói chi ti·∫øt

**Email v√†o Spam:**
1. Ki·ªÉm tra th∆∞ m·ª•c Spam/Junk
2. ƒê√°nh d·∫•u "Not Spam" cho email t·ª´ watershoputetea@gmail.com
3. Th√™m v√†o danh s√°ch li√™n h·ªá

**Nh·∫≠n qu√° nhi·ªÅu email:**
- H·ªá th·ªëng c√≥ cooldown 60 gi√¢y
- Ch·ªâ g·ª≠i khi c·∫£nh b√°o k√©o d√†i >10 gi√¢y
- C√≥ th·ªÉ t·∫Øt email b·∫•t c·ª© l√∫c n√†o

## T·∫Øt c·∫£nh b√°o email

Click n√∫t **"‚ùå T·∫Øt Email"** trong ph·∫ßn C·∫£nh B√°o Email

## V√≠ d·ª• s·ª≠ d·ª•ng

### K·ªãch b·∫£n 1: Gi√°m s√°t nh√†
```
1. ƒêƒÉng k√Ω khu√¥n m·∫∑t gia ƒë√¨nh
2. Hu·∫•n luy·ªán model
3. B·∫≠t email c·∫£nh b√°o v·ªõi email c·ªßa b·∫°n
4. Khi c√≥ ng∆∞·ªùi l·∫° v√†o nh√† >10s ‚Üí Nh·∫≠n email ngay
```

### K·ªãch b·∫£n 2: VƒÉn ph√≤ng
```
1. ƒêƒÉng k√Ω khu√¥n m·∫∑t nh√¢n vi√™n
2. Hu·∫•n luy·ªán model
3. B·∫≠t email cho b·∫£o v·ªá/qu·∫£n l√Ω
4. Ph√°t hi·ªán ng∆∞·ªùi l·∫° ‚Üí G·ª≠i c·∫£nh b√°o t·ª± ƒë·ªông
```

### K·ªãch b·∫£n 3: C·ª≠a h√†ng
```
1. ƒêƒÉng k√Ω khu√¥n m·∫∑t nh√¢n vi√™n
2. Hu·∫•n luy·ªán model
3. B·∫≠t email cho ch·ªß c·ª≠a h√†ng
4. Theo d√µi kh√°ch h√†ng l·∫° xu·∫•t hi·ªán l√¢u
```

## Th√¥ng s·ªë k·ªπ thu·∫≠t

- **Th·ªùi gian ph√°t hi·ªán:** 10 gi√¢y
- **Cooldown:** 60 gi√¢y
- **Timeout k·∫øt n·ªëi:** 10 gi√¢y
- **ƒê·ªãnh d·∫°ng:** HTML email v·ªõi ·∫£nh ƒë√≠nh k√®m
- **Giao th·ª©c:** SMTP v·ªõi STARTTLS

## M√£ ngu·ªìn

File li√™n quan:
- `email_alert.py` - Class x·ª≠ l√Ω email
- `main.py` - T√≠ch h·ª£p v√†o h·ªá th·ªëng
- `templates/esp32_index.html` - Giao di·ªán web

## H·ªó tr·ª£

N·∫øu g·∫∑p v·∫•n ƒë·ªÅ, ki·ªÉm tra:
1. Console log trong terminal
2. Tr·∫°ng th√°i email trong web interface
3. K·∫øt n·ªëi internet
4. C·∫•u h√¨nh email ƒë√∫ng ch∆∞a
